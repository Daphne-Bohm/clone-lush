(function ($) {
    Drupal.behaviors.sliders = {
        attach: function (context, settings) {

            $(document).ready(function() {
                //Slideshow
                $('.slider-container').each(function(){
                    var container = $(this);
                    //Is there a UL?
                    if($('ul',container).length > 0){
                        var count = 0;
                        var labels = [];
                        $('ul > li > a',container).each(function(){
                            var link = $(this);
                            $('span', link).remove();
                            var text =link.text();
                            labels[count] = text;
                            count++;
                        });
                        $( ".slider",container ).slider({
                            min: 0,
                            max: count-1,
                            change: function( event, ui ) {
                                window.location.href = $('ul > li:eq('+ui.value+') a',container).attr('href');
                            }
                        }).slider('pips', {
                                rest: 'label',
                                labels: labels
                            });
                        //Hide list
                        $('ul',container).hide();
                    }
                });
            });

        }
    };
})(jQuery);