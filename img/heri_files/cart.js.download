(function ($) {
    // here $ would be point to jQuery object
    Drupal.behaviors.cartSlideout = {
      attach: function (context, settings) {


          $('.cart-slideout table').once('cartslideout', function(){
              $('.cart-slideout table').each(function(){
                  var table = $(this);
                  $('tbody tr', table).each(function(){
                      var row = $(this);
                      //var topPos = (row.offset().top) - (table.offset().top);
                      //$('.cart-edit-wrapper',row).css('top', topPos);
                      //console.log(topPos);
                      $('.cart-show-edit', row).click(function(e){
                          row.toggleClass('active');
                          $('.cart-edit-wrapper',row).toggle();
                          e.preventDefault();
                      });
                      $('.cart-edit-close', row).click(function(b){
                          row.toggleClass('active');
                          $('.cart-edit-wrapper',row).toggle();
                          b.preventDefault();
                          // Reset to default values.
                          $('.cart-edit-wrapper', row).find("input,select").each(function(){
                            $(this).val(this.defaultValue);
                          });
                      });
                      $('.cart-show-wishlist', row).click(function(e){
                          row.toggleClass('active');
                          $('.cart-wishlist-wrapper',row).toggle();
                          e.preventDefault();
                      });
                      $('.cart-wishlist-message input', row).click(function(b){
                          row.toggleClass('active');
                          $('.cart-wishlist-wrapper',row).toggle();
                          //b.preventDefault();
                      });
                  });
              });
          });

      }
   }
})(jQuery);
